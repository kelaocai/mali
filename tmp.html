<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="static/bootcss/css/bootstrap.min.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>


    <![endif]-->
</head>
<body style="background-color: #FAF8F2;">
<div class="container">

    <!--<a class="btn btn-lg btn-success" href="javascript:;" role="button" onclick="test()">TEST</a>-->
    <div style="margin:20px auto;">
        <canvas id="myCanvas1" width="296" height="296" style="margin:20px auto;position: absolute; top:0px;"></canvas>
        <!--<canvas id="myCanvas2" width="586" height="586" style="position: absolute; top:0px;" onclick="test2()"></canvas>-->
    </div>
</div>
<!-- /container -->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="static/js/jquery-1.11.2.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="static/bootcss/js/bootstrap.min.js"></script>
<script src="static/layer/layer.min.js"></script>
<script src="static/js/h5.js"></script>

<script>

    var img_bg = new Image()
    img_bg.src = "static/img/bei@2x.png"

    var img_touch = new Image()
    img_touch.src = "static/img/touch@2x.png"

    $(function () {
        var c1 = document.getElementById("myCanvas1");
        var ctx1 = c1.getContext("2d");

        //    var c2 = document.getElementById("myCanvas2");
        //    var cxt2 = c2.getContext("2d");


        ctx1.scale(0.5, 0.5);
        ctx1.drawImage(img_bg, 0, 0);

        c1.addEventListener('click', function (e) {
            p = getEventPosition(e);
            if ((p.x > 120 && p.x < 180) && (p.y > 40 && p.y < 110)) {
                //alert('颈椎'+','+p.x+","+p.y);
                reDraw(c1, ctx1, 1);
            } else if ((p.x > 120 && p.x < 180) && (p.y >= 110 && p.y < 210)) {
                reDraw(c1, ctx1, 2);
                //alert('胸椎');
            }
            else if ((p.x > 120 && p.x < 180) && (p.y >= 210 && p.y < 290)) {
                reDraw(c1, ctx1, 3);
                //alert('腰椎');
            }
            else {
                alert(',' + p.x + "," + p.y);
            }
        }, false);

        reDraw(c1, ctx1, 1);
    });

    function reDraw(c1, ctx1, count) {
        //clear:
        c1.width = c1.width;
        c1.height = c1.height;

        ctx1.scale(0.5, 0.5);
        ctx1.drawImage(img_bg, 0, 0);

        switch (count) {
            case 1:
                //tip:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 50, 300, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 170);
                ctx1.lineTo(380, 120);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280, 150);
                //tip text:
                ctx1.font = "30px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("心慌，失眠!", 400, 100);
                break;
            case 2:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 190, 300, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 310);
                ctx1.lineTo(380, 260);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280, 290);
                //tip text:
                ctx1.font = "30px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("脾弱 肾虚!", 400, 240);
                break;
            case 3:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 330, 300, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 480);
                ctx1.lineTo(380, 400);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280, 460);
                //tip text:
                ctx1.font = "30px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("阳痿 早泄!", 400, 380);
                break;
        }
    }


    function mali() {
        layer.alert('关注服务号', 8);
    }

    function test() {
        cxt2.scale(0.5, 0.5);
        cxt2.drawImage(img_jz, 100, 20);

    }


    function anmo() {
        $.get("moni.php", function (data, status) {
            $('#anmo_count').html(data);
            alert("数据: " + data + "\n状态: " + status);
        });
    }

    function getEventPosition(ev) {
        var x, y;
        if (ev.layerX || ev.layerX == 0) {
            x = ev.layerX;
            y = ev.layerY;
        } else if (ev.offsetX || ev.offsetX == 0) {
            x = ev.offsetX;
            y = ev.offsetY;
        }
        return {x: x, y: y};
    }


</script>
</body>
</html>