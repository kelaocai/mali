<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>指尖上的养生，全民duang一下</title>

    <!-- Bootstrap -->
    <link href="static/bootcss/css/bootstrap.min.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>


    <![endif]-->

    <style type="text/css">
        .btn-success, .btn-success:active, .btn-success:hover, .btn-success:focus {
            background-color: #F4A500;
            border-color: #F4A500;
        }

        .hong {
            color: red;
            font: bold;
            font-size: 18px;;
        }

    </style>


</head>
<body style="background-color: #FAF8F2; ">
<div class="container-fluid">

    <div class="row text-center" style="">
        <div class="col-md-12 col-xs-12"><h3 style="color: #FD8F80">帮好友赢免费脊柱按摩</h3></div>
    </div>


    <div class="row text-center">


        <div class="col-md-2 col-xs-4"><a href="javascript:;" onclick="guize()" style="color: #126169">活动规则>></a></div>
        <div class="col-md-10 col-xs-8">已有<span style="font-size: 36px;margin: 0 5px;color: #126169">6</span>人帮TA按摩<h4>
            共需8人</h4></div>
    </div>


    <div class="row text-center">
        <div class="col-md-12">
            <div style="float: left;margin-bottom:-25px;">
                <img src="static/img/xss.jpg" class="img img-circle" style="width: 50px;border: 2px #ffffff solid;">
            </div>
            <canvas id="myCanvas1" width="296" height="296"></canvas>
        </div>
    </div>

    <div class="row text-center" style="margin-bottom: 10px;">
        <div class="col-md-12">
            <!--<a class="btn btn-lg btn-success" href="javascript:;" role="button" onclick="guanzhu()">duang~,帮Ta按一下</a>-->

            <a class="btn btn-lg btn-success" href="javascript:;" role="button" onclick="yaoqing()">请好友帮我按摩</a>


        </div>
    </div>


</div>

<img src="static/img/bei@2x.png" style="display: none" id="img_bg">
<img src="static/img/touch@2x.png" style="display: none" id="img_touch">
<!-- /container -->

<div class="layer_notice"
     style="display: none; background-color: #FAF8F1 ;padding: 10px; border-radius: 15px; float: left;line-height: 24px;">
    1、分享至朋友圈,<span class="hong">邀请好友</span>帮忙按摩；获免费体验机会；<br>
    2、邀请满<span class="hong">8个好友</span>有机会获得原价<span class="hong">￥398</span>元的雪时尚特色脊椎养生<br>
    （包括：特色脊椎养生（约45分钟）+养生羹1份！免费提供使用毛巾、服装、拖鞋、活氧能量水！套餐全长约60分钟），共<span class="hong">38个名额</span>。<br>
    3、所有获奖人员名单将在雪时尚微信图文推送告知。<br>

    <div style="text-align: center">
        <a class="btn btn-lg btn-success" href="javascript:;" role="button" onclick="layer.closeAll();"
                >朕知道了</a>
    </div>


</div>

<div class="layer_guanzhu"
     style="display: none; background-color: #FAF8F1 ;padding: 10px; border-radius: 15px; float: left;line-height: 24px; ">

    <img src="static/img/girl@2x.png" class="img-responsive"
         style="width: 62px;margin: 0 auto;"><h5 style="text-align: center">duang~,成功助力!</h5>
    <a class="btn btn-lg btn-success" href="javascript:;" role="button"
       style="margin: 20px auto;display: block">我也要免费</a>
    1、关注雪时尚微信服务号，参加活动<br>
    2、分享至朋友圈,邀请好友帮忙按摩，获免费体验机会<br>

</div>

<div class="layer_yaoqing"
     style="display: none; background-color: #FAF8F1 ;padding: 10px; border-radius: 15px;line-height: 24px;width: 280px; text-align: center ">

    <img src="static/img/girl@2x.png" class="img-responsive"
         style="width: 62px;margin: 0 auto;"><h5 style="text-align: center">请好友帮忙</h5>
    发给好友或分享至朋友圈<br>邀请<span class="hong">8个好友</span>帮忙，赢免费脊柱按摩<br>
    <a class="btn btn-lg btn-success" href="javascript:;" role="button" style="margin: 20px auto;display: block"
       onclick="layer.closeAll();">马上邀请</a>


</div>


<!--<div class="layer_guid"-->
<!--style="display: block; position: absolute;right:0px; top:0px;"  align="right">-->

<!--<img src="static/img/girl@2x.png">-->


<!--</div>-->


</div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="static/js/jquery-1.11.2.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="static/bootcss/js/bootstrap.min.js"></script>
<script src="static/layer/layer.min.js"></script>
<script src="static/js/hidpi-canvas.min.js"></script>
<script src="static/js/h5.js"></script>

<script>


    var img_bg;
    var img_touch;
    var ratio;


    $(function () {

        var c1 = document.getElementById("myCanvas1");
        var ctx1 = c1.getContext("2d");




        img_bg = document.getElementById("img_bg");
        img_touch = document.getElementById("img_touch");

        c1.addEventListener('click', function (e) {
            p = getEventPosition(e);
            if ((p.x > 120 && p.x < 180) && (p.y > 40 && p.y < 110)) {
                //alert('颈椎'+','+p.x+","+p.y);
                reDraw(c1, ctx1, 1);
            } else if ((p.x > 120 && p.x < 180) && (p.y >= 110 && p.y < 210)) {
                reDraw(c1, ctx1, 2);
                //alert('胸椎');
            }
            else if ((p.x > 120 && p.x < 180) && (p.y >= 210 && p.y < 290)) {
                reDraw(c1, ctx1, 3);
                //alert('腰椎');
            }
            else {
//                alert(',' + p.x + "," + p.y);
            }
        }, false);

        reDraw(c1, ctx1, 1);
    });


    var getPixelRatio = function(context) {
        var backingStore = context.backingStorePixelRatio ||
                context.webkitBackingStorePixelRatio ||
                context.mozBackingStorePixelRatio ||
                context.msBackingStorePixelRatio ||
                context.oBackingStorePixelRatio ||
                context.backingStorePixelRatio || 1;

        return (window.devicePixelRatio || 1) / backingStore;
    };

    function reDraw(c1, ctx1, count) {
        //clear:
        c1.width = c1.width;
        c1.height = c1.height;



        ctx1.scale(0.5, 0.5);
        ratio = getPixelRatio(ctx1);
        ctx1.drawImage(img_bg, 0,0,586*ratio, 586*ratio);



        switch (count) {
            case 1:
                //tip:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 50, 200, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 170);
                ctx1.lineTo(380, 120);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280*ratio, 150*ratio,59*ratio,87*ratio);
                //tip text:
                ctx1.font = "24px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("眩晕，头痛", 400, 100);
                ctx1.fillText("溃疡，颈痛", 400, 140);
                break;
            case 2:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 190, 200, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 310);
                ctx1.lineTo(380, 260);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280*ratio, 290*ratio,59*ratio,87*ratio);
                //tip text:
                ctx1.font = "24px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("肝病，胃炎", 400, 240);
                ctx1.fillText("糖尿病，心脏病", 400, 280);
                break;
            case 3:
                ctx1.fillStyle = "RGBA(252,220,0, 0.8)";
                ctx1.roundRect(380, 330, 200, 150, 10, true);
                //tip line:
                ctx1.beginPath();
                ctx1.moveTo(300, 480);
                ctx1.lineTo(380, 400);
                ctx1.stroke();
                //touch img
                ctx1.drawImage(img_touch, 280*ratio, 460*ratio,59*ratio,87*ratio);
                //tip text:
                ctx1.font = "24px simsun bold";
                ctx1.fillStyle = "#000000";
                ctx1.fillText("便秘，子宫炎", 400, 380);
                ctx1.fillText("腹泻，结石", 400, 420);
                ctx1.fillText("痛经", 400, 460);
                break;
        }
    }


    function guize() {
        //layer.alert('关注服务号', 8);
        $.layer({
            type: 1,
            area: ['280', 'auto'],
            title: false,
            border: [0],
            bgcolor: '',
            shift: 'top',
            closeBtn: false,
            shade: [0.5, '#000'],
            page: {dom: '.layer_notice'}
        });
    }

    function yaoqing() {
        //layer.alert('关注服务号', 8);
        $.layer({
            type: 1,
            title: false,
            area: ['280', 'auto'],
            border: [0],
            bgcolor: '',
            closeBtn: false,
            shade: [0.5, '#000'],
            page: {dom: '.layer_yaoqing'}
        });
    }


    function guanzhu() {
        //layer.alert('关注服务号', 8);
        $.layer({
            type: 1,
            area: ['280px', 'auto'],
            title: false,
            border: [0],
            bgcolor: '',
            shift: 'top',
            closeBtn: false,
            shade: [0.5, '#000'],
            page: {dom: '.layer_guanzhu'}
        });
    }


    function test() {
        cxt2.scale(0.5, 0.5);
        cxt2.drawImage(img_jz, 100, 20);

    }


    function anmo() {
        $.get("moni.php", function (data, status) {
            $('#anmo_count').html(data);
            alert("数据: " + data + "\n状态: " + status);
        });
    }

    function getEventPosition(ev) {
        var x, y;
        if (ev.layerX || ev.layerX == 0) {
            x = ev.layerX;
            y = ev.layerY;
        } else if (ev.offsetX || ev.offsetX == 0) {
            x = ev.offsetX;
            y = ev.offsetY;
        }
        return {x: x, y: y};
    }


</script>
</body>
</html>